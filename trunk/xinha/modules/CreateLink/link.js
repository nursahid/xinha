CreateLink._pluginInfo={name:"CreateLink",origin:"Xinha Core",version:"$LastChangedRevision: 694 $".replace(/^[^:]*: (.*) \$$/,"$1"),developer:"The Xinha Core Developer Team",developer_url:"$HeadURL: http://svn.xinha.org/branches/0.95_stable/modules/CreateLink/link.js $".replace(/^[^:]*: (.*) \$$/,"$1"),sponsor:"",sponsor_url:"",license:"htmlArea"};function CreateLink(a){}Xinha.prototype._createLink=function(c){var b=this;var f=null;if(typeof c=="undefined"){c=this.getParentElement();if(c){while(c&&!/^a$/i.test(c.tagName)){c=c.parentNode}}}if(!c){var e=b.getSelection();var a=b.createRange(e);var d=0;if(Xinha.is_ie){if(e.type=="Control"){d=a.length}else{d=a.compareEndPoints("StartToEnd",a)}}else{d=a.compareBoundaryPoints(a.START_TO_END,a)}if(d===0){alert(Xinha._lc("You need to select some text before creating a link"));return}f={f_href:"",f_title:"",f_target:"",f_usetarget:b.config.makeLinkShowsTarget}}else{f={f_href:Xinha.is_ie?b.stripBaseURL(c.href):c.getAttribute("href"),f_title:c.title,f_target:c.target,f_usetarget:b.config.makeLinkShowsTarget}}Dialog(b.config.URIs.link,function(o){if(!o){return false}var g=c;if(!g){try{var m=Xinha.uniq("http://www.example.com/Link");b._doc.execCommand("createlink",false,m);var n=b._doc.getElementsByTagName("a");for(var l=0;l<n.length;l++){var j=n[l];if(j.href==m){if(!g){g=j}j.href=o.f_href;if(o.f_target){j.target=o.f_target}if(o.f_title){j.title=o.f_title}}}}catch(k){}}else{var h=o.f_href.trim();b.selectNodeContents(g);if(h===""){b._doc.execCommand("unlink",false,null);b.updateToolbar();return false}else{g.href=h}}if(!(g&&g.tagName.toLowerCase()=="a")){return false}g.target=o.f_target.trim();g.title=o.f_title.trim();b.selectNodeContents(g);b.updateToolbar()},f)};