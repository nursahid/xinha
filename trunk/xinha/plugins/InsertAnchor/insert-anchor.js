function InsertAnchor(c){this.editor=c;var a=c.config;var b=this;a.registerButton({id:"insert-anchor",tooltip:this._lc("Insert Anchor"),image:c.imgURL("insert-anchor.gif","InsertAnchor"),textMode:false,action:function(d){b.buttonPress(d)}});a.addToolbarElement("insert-anchor","createlink",1)}InsertAnchor._pluginInfo={name:"InsertAnchor",origin:"version: 1.0, by Andre Rabold, MR Printware GmbH, http://www.mr-printware.de",version:"2.0",developer:"Udo Schmal",developer_url:"http://www.schaffrath-neuemedien.de",c_owner:"Udo Schmal",sponsor:"L.N.Schaffrath NeueMedien",sponsor_url:"http://www.schaffrath-neuemedien.de",license:"htmlArea"};InsertAnchor.prototype._lc=function(a){return Xinha._lc(a,"InsertAnchor")};InsertAnchor.prototype.onGenerate=function(){this.editor.addEditorStylesheet(_editor_url+"plugins/InsertAnchor/insert-anchor.css")};InsertAnchor.prototype.buttonPress=function(e){var g=null;var d=e.getSelectedHTML();var f=e._getSelection();var c=e._createRange(f);var b=e._activeElement(f);if(!(b!=null&&b.tagName.toLowerCase()=="a")){b=e._getFirstAncestor(f,"a")}if(b!=null&&b.tagName.toLowerCase()=="a"){g={name:b.id}}else{g={name:""}}e._popupDialog("plugin://InsertAnchor/insert_anchor",function(j){if(j){var a=j.name;if(a==""||a==null){if(b){var k=b.innerHTML;b.parentNode.removeChild(b);e.insertHTML(k)}return}try{var i=e._doc;if(!b){b=i.createElement("a");b.id=a;b.name=a;b.title=a;b.className="anchor";b.innerHTML=d;if(Xinha.is_ie){c.pasteHTML(b.outerHTML)}else{e.insertNodeAtSelection(b)}}else{b.id=a;b.name=a;b.title=a;b.className="anchor"}}catch(h){}}},g)};