function LangMarks(e,d){this.editor=e;var a=e.config;var b=this;var c={};c[this._lc("&mdash; language &mdash;")]="";c[this._lc("Greek")]="el";c[this._lc("English")]="en";c[this._lc("French")]="fr";c[this._lc("Latin")]="la";a.registerDropdown({id:"langmarks",tooltip:this._lc("language select"),options:c,action:function(f){b.onSelect(f,this)},refresh:function(f){b.updateValue(f,this)}});a.addToolbarElement("langmarks","inserthorizontalrule",1)}LangMarks._pluginInfo={name:"LangMarks",version:"1.0",developer:"Udo Schmal",developer_url:"",sponsor:"L.N.Schaffrath NeueMedien",sponsor_url:"http://www.schaffrath-neuemedien.de/",c_owner:"Udo Schmal & Schaffrath NeueMedien",license:"htmlArea"};LangMarks.prototype._lc=function(a){return Xinha._lc(a,"LangMarks")};LangMarks.prototype.onGenerate=function(){var b="LM-style";var a=this.editor._doc.getElementById(b);if(a==null){a=this.editor._doc.createElement("link");a.id=b;a.rel="stylesheet";a.href=_editor_url+"plugins/LangMarks/lang-marks.css";this.editor._doc.getElementsByTagName("HEAD")[0].appendChild(a)}};LangMarks.prototype.onSelect=function(d,c,b,f){var i=d._toolbarObjects[c.id];var e=i.element.selectedIndex;var g=i.element.value;var k=d.getParentElement();var j=true;var h=(k&&k.tagName.toLowerCase()=="span");var a=(b&&f&&k&&k.tagName.toLowerCase()==b);if(a){k.className=g;k.lang=g;d.updateToolbar();return}if(h&&e==0&&!/\S/.test(k.style.cssText)){while(k.firstChild){k.parentNode.insertBefore(k.firstChild,k)}k.parentNode.removeChild(k);d.updateToolbar();return}if(h){if(k.childNodes.length==1){k.className=g;k.lang=g;j=false;d.updateToolbar()}}if(j){d.surroundHTML('<span lang="'+g+'" class="'+g+'">',"</span>")}};LangMarks.prototype.updateValue=function(f,h){var a=f._toolbarObjects[h.id].element;var e=f.getParentElement();if(typeof e.className!="undefined"&&/\S/.test(e.className)){var b=a.options;var g=e.className;for(var c=b.length;--c>=0;){var d=b[c];if(g==d.value){a.selectedIndex=c;return}}}a.selectedIndex=0};