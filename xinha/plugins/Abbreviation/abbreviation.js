function Abbreviation(c){this.editor=c;var a=c.config;var b=this;a.registerButton({id:"abbreviation",tooltip:this._lc("Abbreviation"),image:c.imgURL("ed_abbreviation.gif","Abbreviation"),textMode:false,action:function(d){b.buttonPress(d)}});a.addToolbarElement("abbreviation","inserthorizontalrule",1)}Abbreviation._pluginInfo={name:"Abbreviation",version:"1.0",developer:"Udo Schmal",developer_url:"",sponsor:"L.N.Schaffrath NeueMedien",sponsor_url:"http://www.schaffrath-neuemedien.de/",c_owner:"Udo Schmal & Schaffrath-NeueMedien",license:"htmlArea"};Abbreviation.prototype._lc=function(a){return Xinha._lc(a,"Abbreviation")};Abbreviation.prototype.onGenerate=function(){this.editor.addEditorStylesheet(_editor_url+"plugins/Abbreviation/abbreviation.css")};Abbreviation.prototype.buttonPress=function(e,d,f){var h=null;var c=e.getSelectedHTML();var g=e._getSelection();var a=e._createRange(g);var b=e._activeElement(g);if(!(b!=null&&b.tagName.toLowerCase()=="abbr")){b=e._getFirstAncestor(g,"abbr")}if(b!=null&&b.tagName.toLowerCase()=="abbr"){h={title:b.title,text:b.innerHTML}}else{h={title:"",text:c}}e._popupDialog("plugin://Abbreviation/abbreviation",function(l){if(l){var k=l.title;if(k==""||k==null){if(b){var m=b.innerHTML;b.parentNode.removeChild(b);e.insertHTML(m)}return}try{var j=e._doc;if(!b){b=j.createElement("abbr");b.title=k;b.innerHTML=c;if(Xinha.is_ie){a.pasteHTML(b.outerHTML)}else{e.insertNodeAtSelection(b)}}else{b.title=k}}catch(i){}}},h)};