function InsertSnippet(editor){this.editor=editor;var cfg=editor.config;var self=this;cfg.registerButton({id:"insertsnippet",tooltip:this._lc("Insert Snippet"),image:editor.imgURL("ed_snippet.gif","InsertSnippet"),textMode:false,action:function(editor){self.buttonPress(editor)}});cfg.addToolbarElement("insertsnippet","insertimage",-1);this.snippets=null;var backend=cfg.InsertSnippet.snippets+"?";if(cfg.InsertSnippet.backend_data!=null){for(var i in cfg.InsertSnippet.backend_data){backend+="&"+i+"="+encodeURIComponent(cfg.InsertSnippet.backend_data[i])}}Xinha._getback(backend,function(getback){eval(getback);self.snippets=snippets})}InsertSnippet.prototype.onUpdateToolbar=function(){if(!this.snippets){this.editor._toolbarObjects.insertsnippet.state("enabled",false)}else{InsertSnippet.prototype.onUpdateToolbar=null}};InsertSnippet._pluginInfo={name:"InsertSnippet",version:"1.2",developer:"Raimund Meyer",developer_url:"http://rheinauf.de",c_owner:"Raimund Meyer",sponsor:"",sponsor_url:"",license:"htmlArea"};InsertSnippet.prototype._lc=function(a){return Xinha._lc(a,"InsertSnippet")};InsertSnippet.prototype.onGenerate=function(){this.editor.addEditorStylesheet(_editor_url+"plugins/InsertSnippet/InsertSnippet.css")};Xinha.Config.prototype.InsertSnippet={snippets:_editor_url+"plugins/InsertSnippet/demosnippets.js",css:["../InsertSnippet.css"],showInsertVariable:false,backend_data:null};InsertSnippet.prototype.buttonPress=function(c){var b=c.config;b.snippets=this.snippets;var a=this;c._popupDialog("plugin://InsertSnippet/insertsnippet",function(d){if(!d){return false}c.focusEditor();if(d.how=="variable"){c.insertHTML("{"+a.snippets[d.snippetnum].id+"}")}else{c.insertHTML(a.snippets[d.snippetnum].HTML)}},b)};